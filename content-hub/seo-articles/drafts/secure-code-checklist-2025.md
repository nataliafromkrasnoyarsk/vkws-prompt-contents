---
title: "Безопасный код: чек-лист от планирования до релиза"
description: "Полный чек-лист безопасной разработки: 6 этапов от планирования до мониторинга. SAST, DAST, code review и аудит инцидентов для enterprise-команд."
url: /blog/secure-code-checklist-2025
keywords:
  - безопасный код
  - безопасная разработка
  - SAST DAST
  - уязвимости в коде
  - code review безопасность
author: VK Cloud Security Expert
audience: enterprise
tone: expert
status: draft
created: 2025-12-24
---

# Безопасный код: чек-лист от планирования до релиза

## Введение

### Почему безопасность кода — задача всей команды

Безопасный код — результат работы всей команды, а не только отдела информационной безопасности. Разработчики пишут код, архитекторы проектируют системы, DevOps настраивают пайплайны — каждый участник влияет на итоговый уровень защищённости продукта.

Подход «безопасность в конце» не работает при современных темпах разработки. Когда релизы выходят каждые две недели, проверка безопасности перед выпуском становится узким горлышком. Решение — интегрировать проверки на каждом этапе, от первого коммита до продакшена.

### Стоимость уязвимости на разных этапах

Исправление уязвимости дорожает по мере продвижения по циклу разработки:

| Этап обнаружения | Относительная стоимость |
|------------------|------------------------|
| Проектирование | 1x |
| Разработка | 6x |
| Тестирование | 15x |
| Продакшен | 100x |

Уязвимость, найденная на этапе проектирования, исправляется за час. Та же проблема в продакшене требует экстренного патча, оповещения клиентов и работы с последствиями инцидента.

---

## Этап 1. Планирование и проектирование

Безопасная разработка начинается до написания первой строки кода. На этапе проектирования команда определяет угрозы и требования к защите.

### Threat Modeling

Threat Modeling — методика выявления потенциальных угроз до начала разработки. Команда анализирует архитектуру системы и определяет:

- Какие данные обрабатывает система
- Где проходят границы доверия
- Какие векторы атак возможны
- Какие компоненты наиболее уязвимы

Популярные методики: STRIDE (Microsoft), PASTA, DREAD. Для большинства проектов достаточно STRIDE — она классифицирует угрозы по шести категориям: подмена, изменение данных, отказ от авторства, раскрытие информации, отказ в обслуживании, повышение привилегий.

### Security Requirements

На основе threat model формируются требования безопасности:

- Требования к аутентификации и авторизации
- Политики шифрования данных
- Требования к логированию
- Стандарты обработки пользовательского ввода

Требования фиксируются как часть технического задания и становятся критериями приёмки.

### ✅ Чек-лист этапа «Планирование»

- [ ] Проведён Threat Modeling для новых компонентов
- [ ] Определены границы доверия в архитектуре
- [ ] Сформированы Security Requirements
- [ ] Требования безопасности включены в критерии приёмки
- [ ] Выбраны библиотеки и фреймворки с учётом безопасности

---

## Этап 2. Разработка

На этапе написания кода закладывается основа безопасности продукта. Стандарты кодирования и инструменты помогают избежать типичных уязвимостей.

### Стандарты безопасного кодирования

Стандарты безопасного кода — набор правил для предотвращения типичных уязвимостей: SQL-инъекций, XSS, небезопасной десериализации.

Основа — отраслевые стандарты:
- **OWASP Secure Coding Practices** — универсальный гайд
- **CERT Secure Coding Standards** — стандарты для C, C++, Java
- **CWE Top 25** — список критических уязвимостей

Адаптируйте стандарты под ваш стек. Для Java-команды — правила работы с Spring Security. Для Python — рекомендации по использованию Django ORM вместо raw SQL.

### IDE-плагины и линтеры

Инструменты статического анализа в редакторе дают мгновенную обратную связь:

- **SonarLint** — плагин для IntelliJ, VS Code, Eclipse
- **Semgrep** — быстрый анализатор с кастомными правилами
- **Snyk IDE** — проверка зависимостей в реальном времени

Разработчик видит предупреждение в момент написания небезопасного кода, а не через день после code review.

### ✅ Чек-лист этапа «Разработка»

- [ ] Команда ознакомлена со стандартами безопасного кода
- [ ] Настроены IDE-плагины для статического анализа
- [ ] Используются параметризованные запросы к БД
- [ ] Пользовательский ввод валидируется и санитизируется
- [ ] Секреты не хранятся в коде (используется Vault или аналог)
- [ ] Зависимости добавляются из проверенных источников

---

## Этап 3. Code Review

Code review — контрольная точка перед попаданием кода в основную ветку. Security-focused review дополняет проверку функциональности анализом безопасности.

### Security-focused review

При проверке кода ревьювер обращает внимание на:

- **Аутентификация и авторизация** — корректно ли проверяются права доступа
- **Обработка данных** — валидация, санитизация, экранирование
- **Криптография** — использование проверенных алгоритмов, корректная работа с ключами
- **Логирование** — отсутствие чувствительных данных в логах
- **Обработка ошибок** — информация об ошибках не раскрывает внутреннюю структуру

Создайте чек-лист для ревьюверов и включите его в шаблон pull request.

### Автоматизация проверок

Автоматические проверки в CI дополняют ручной review:

- Pre-commit хуки для поиска секретов (git-secrets, detect-secrets)
- Автоматический запуск линтеров при создании PR
- Блокировка merge при критических findings

Автоматизация не заменяет ручной review, но отсекает очевидные проблемы до того, как ревьювер потратит на них время.

### ✅ Чек-лист этапа «Code Review»

- [ ] Настроены pre-commit хуки для поиска секретов
- [ ] PR-шаблон содержит security-чек-лист
- [ ] Назначен Security Champion для сложных изменений
- [ ] Автоматические проверки блокируют merge при критических проблемах
- [ ] Изменения в security-критичных компонентах требуют дополнительного approve

---

## Этап 4. Тестирование

Этап тестирования включает три типа анализа безопасности: статический (SAST), динамический (DAST) и анализ зависимостей (SCA).

### SAST: статический анализ

SAST (Static Application Security Testing) анализирует исходный код без запуска приложения. Инструменты находят:

- Уязвимости в коде (инъекции, XSS, небезопасная криптография)
- Нарушения стандартов кодирования
- Потенциальные утечки данных

Инструменты: SonarQube, Checkmarx, Semgrep, Fortify.

SAST эффективен для поиска проблем в собственном коде, но не видит уязвимости времени выполнения.

### DAST: динамический анализ

DAST (Dynamic Application Security Testing) тестирует работающее приложение, имитируя действия злоумышленника:

- Отправка вредоносных запросов
- Проверка конфигурации сервера
- Поиск открытых эндпоинтов

Инструменты: OWASP ZAP, Burp Suite, Acunetix.

DAST находит проблемы, невидимые для статического анализа: ошибки конфигурации, проблемы с CORS, небезопасные заголовки.

### SCA: проверка зависимостей

SCA (Software Composition Analysis) проверяет сторонние библиотеки на известные уязвимости (CVE).

Инструменты: Snyk, Dependabot, OWASP Dependency-Check.

Критично для enterprise: 80-90% кода современных приложений — сторонние зависимости. Уязвимость в популярной библиотеке (как Log4Shell) мгновенно становится вашей проблемой.

### ✅ Чек-лист этапа «Тестирование»

- [ ] SAST интегрирован в CI-пайплайн
- [ ] DAST запускается на staging-окружении
- [ ] SCA проверяет зависимости при каждом билде
- [ ] Настроены пороговые значения для блокировки релиза
- [ ] Критические уязвимости (CVSS 9+) блокируют деплой
- [ ] Результаты сканирований агрегируются в едином дашборде

---

## Этап 5. Релиз и деплой

На этапе релиза проверяется готовность к продакшену: прошли ли все security gates, безопасны ли конфигурации.

### Security gates в CI/CD

Security gates — контрольные точки, которые блокируют деплой при несоответствии требованиям:

| Gate | Условие блокировки |
|------|-------------------|
| SAST | Критические уязвимости в коде |
| SCA | CVE с CVSS > 8.0 без исправления |
| DAST | High-severity findings |
| Secrets | Обнаружены секреты в коде |
| Container | Критические уязвимости в базовом образе |

Gates должны быть обязательными — никакого «пропустим в этот раз». Исключения фиксируются через формальный процесс risk acceptance.

### Проверка конфигураций

Безопасный код в небезопасном окружении — всё ещё уязвимая система. Проверяйте:

- Kubernetes-манифесты (запуск от root, привилегированные контейнеры)
- Terraform-конфигурации (публичные S3-бакеты, открытые security groups)
- Docker-образы (устаревшие базовые образы, лишние пакеты)

Инструменты: Checkov, Trivy, Kubesec.

### ✅ Чек-лист этапа «Релиз»

- [ ] Все security gates пройдены
- [ ] Container scanning не выявил критических уязвимостей
- [ ] IaC-конфигурации проверены на misconfigurations
- [ ] Секреты передаются через Vault или Secret Manager
- [ ] TLS настроен корректно (проверка через SSL Labs)
- [ ] Заголовки безопасности установлены (CSP, HSTS, X-Frame-Options)

---

## Этап 6. Мониторинг и реагирование

После релиза безопасность не заканчивается. Мониторинг и готовность к реагированию — последний рубеж защиты.

### Аудит и логирование

Логирование security-событий необходимо для:

- Обнаружения атак в реальном времени
- Расследования инцидентов
- Соответствия compliance-требованиям

Что логировать:
- Успешные и неуспешные попытки аутентификации
- Изменения прав доступа
- Доступ к чувствительным данным
- Административные действия
- Ошибки валидации

Чего не должно быть в логах: паролей, токенов, персональных данных, номеров карт.

### Отчёты по инцидентам

Процесс реагирования на инциденты включает:

1. **Обнаружение** — алерты от SIEM, сообщения пользователей, внешние уведомления
2. **Классификация** — определение severity и scope
3. **Сдерживание** — изоляция затронутых систем
4. **Устранение** — исправление уязвимости
5. **Восстановление** — возврат к нормальной работе
6. **Post-mortem** — анализ и выводы

Каждый инцидент документируется. Отчёт содержит: timeline, root cause, impact, actions taken, lessons learned.

### ✅ Чек-лист этапа «Мониторинг»

- [ ] Настроено логирование security-событий
- [ ] Логи централизованы в SIEM
- [ ] Настроены алерты на подозрительную активность
- [ ] Определён процесс реагирования на инциденты
- [ ] Назначены ответственные за реагирование
- [ ] Проводятся регулярные учения (tabletop exercises)

---

## Сводный чек-лист безопасной разработки

### Планирование
- [ ] Threat Modeling проведён
- [ ] Security Requirements определены

### Разработка
- [ ] Стандарты безопасного кода внедрены
- [ ] IDE-плагины настроены
- [ ] Секреты не хранятся в коде

### Code Review
- [ ] Pre-commit хуки активны
- [ ] Security-чек-лист в PR-шаблоне

### Тестирование
- [ ] SAST в CI-пайплайне
- [ ] DAST на staging
- [ ] SCA для зависимостей

### Релиз
- [ ] Security gates обязательны
- [ ] IaC проверен
- [ ] Контейнеры просканированы

### Мониторинг
- [ ] Логирование настроено
- [ ] Алерты работают
- [ ] Incident response plan готов

---

## Заключение

Безопасный код — результат системного подхода на всех этапах разработки. Чек-листы помогают не пропустить критичные проверки, но не заменяют культуру безопасности в команде.

Начните с базовых практик: pre-commit хуки, SAST в CI, security gates перед деплоем. По мере зрелости процессов добавляйте DAST, threat modeling, формализованный incident response.

Главное правило: безопасность — это не финальная проверка, а часть каждого этапа разработки.
